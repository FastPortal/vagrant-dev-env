<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Mocha Spec Runner</title>
  <link rel="stylesheet" href="lib/mocha/mocha.css">
  <script src="./lib/mocha/mocha.js"></script>
  <script src="./lib/chai.js"></script>
  <script src="./lib/sinon-1.5.0.js"></script>
  <script data-main="./scripts/config" src="./scripts/libs/require.js"></script>
</head>
<body>
  <div id="mocha"></div>
  <script>
    expect = chai.expect;
    mocha.setup({ 
      ui: 'bdd', 
      globals: ['_', '$', 'jQuery*', 'Backbone'], 
      ignoreLeaks: true,
      timeout: 3000
    });
    require(
      {
        paths: {
          spec: '../spec',
          runner: '../runner/mocha'
        }//, urlArgs: "bust=" + (new Date()).getTime()
      }, 
      [
        'spec/login-spec'
      ], 
      function () {
        var mochaRunner = mocha.run();

        if(!window.PHANTOMJS) return;
        require(['runner'], function (runner) {
            setTimeout(function() {
              runner(mochaRunner);
            }, 10);
        });
      }
    );
  </script>
</body>
</html>
